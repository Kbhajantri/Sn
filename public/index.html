<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="./Images/bitcoin.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiran Bhajantri</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Pangolin:wght@400;700&display=swap" rel="stylesheet">
    <style>

        html {
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch; /* iOS smooth scrolling */
         }

        body {
            overscroll-behavior: contain;
            touch-action: manipulation;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: url(./Images/1.jpg);
            height: 100vh;
            background-size: cover;
            background-position: center;
            padding: 20px;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(2px);
            z-index: -1;
        }

        .main-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
        }

        .main-header h1 {
            color: #ffffff;
            font-family: 'Pacifico', cursive;
            font-size: 48px;
            font-weight: 400;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            letter-spacing: 2px;
        }

        .calculators-wrapper {
            display: flex;
            align-items: flex-start;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .calculator-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 400px;
            text-align: center;
            position: relative;
        }

        .calculator-container::before {
            /* content: ''; */
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.05));
            border-radius: 25px;
            backdrop-filter: blur(30px);
            z-index: -2;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .calculator-container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            z-index: -1;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        h2 {
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: 600;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 8px;
            margin-top: 8px;
            color: #555;
            font-weight: 500;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        input[type="number"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            background: rgba(248, 249, 250, 0.9);
            backdrop-filter: blur(10px);
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .result-container {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin-top: 25px;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }

        .buy-container {
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.9), rgba(32, 201, 151, 0.9)) !important;
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
            transform: translateY(-2px);
        }

        .sell-container {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.9), rgba(253, 126, 20, 0.9)) !important;
            box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3);
            transform: translateY(-2px);
        }

        .buy-sell-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 30px;
        }

        .buy-sell-container .result-container {
            margin-top: -8px;
            padding: 30px 20px;
            position: relative;
            overflow: hidden;
        }

        .buy-sell-container .result-container::before {
            /* content: ''; */
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
        }

        .buy-sell-container .result-label {
            font-size: 25px;
            font-weight: bold;
            margin-bottom: 4px;
            margin-top: -12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .values-container {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            flex-direction: column;
        }

        .value-item {
            flex: 1;
            position: relative;
        }

        .value-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 5px;
            text-transform: uppercase;
            padding-right: 175px;
            color: white;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .buy-sell-container .result-value {
            /* font-family: 'Pangolin', cursive; */
            font-size: 24px;
            margin-bottom: 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .result-label {
            color: white;
            font-size: 14px;
            margin-bottom: 10px;
            opacity: 0.9;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .result-value {
            color: white;
            /* font-family: 'Pangolin', cursive; */
            font-size: 24px;
            font-weight: bold;
            word-break: break-all;
        }

        .result-placeholder {
            color: rgba(255, 255, 255, 0.6);
            font-style: italic;
        }

        .market-result-container {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 13.25px;
            margin-top: 26px;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.2);
            position: relative;
        }

        .market-result-label {
            color: white;
            font-size: 14px;
            margin-bottom: 10px;
            opacity: 0.9;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .market-result-value {
            color: white;
            /* font-family: 'Pangolin', cursive; */
            font-size: 24px;
            font-weight: bold;
            word-break: break-all;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .copy-btn {
            position: absolute;
            top: 36px;
            right: 10px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.4s ease;
            z-index: 10;
        }

        .copy-btn2 {
            position: absolute;
            top: 24px;
            right: 10px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.4s ease;
            z-index: 10;
        }

        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
        }

        .copy-btn2:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        .copy-btn2:active {
            transform: scale(0.95);
        }

        .copy-btn .material-icons {
            color: white;
            font-size: 18px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .copy-btn2 .material-icons {
            color: white;
            font-size: 18px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .copy-feedback {
            position: absolute;
            top: -35px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            opacity: 0;
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 20;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }


        .copy-feedback.show {
            opacity: 1;
            transform: translateY(-5px);
        }
        
        @media (max-width: 768px) {
            .copy-btn {
                padding: 6px;
                top: 31px;
                right: 8px;
            }

            .copy-btn2 {
                padding: 6px;
                top: 31px;
                right: 8px;
            }

            .copy-btn .material-icons {
                font-size: 16px;
            }

            .copy-btn2 .material-icons {
                font-size: 16px;
            }

            .copy-feedback {
                top: -30px;
                right: 8px;
                font-size: 11px;
                padding: 4px 8px;
            }
        }

        @media (max-width: 480px) {
            .main-header h1 {
                font-size: 32px;
            }

            .calculator-container {
                padding: 30px 20px;
            }
            
            h2 {
                font-size: 24px;
            }
            
            .result-value {
                font-size: 20px;
            }

            .result-container {
                padding: 15px;
                min-height: 70px;
            }

            .values-container {
                flex-direction: column;
                gap: 10px;
            }

            .buy-sell-container .result-value {
                font-size: 18px;
                padding: 10px;
            }

            .market-result-container {
                padding: 15px;
                min-height: 70px;
            }

            .market-result-value {
                font-size: 20px;
            }
        }

        .checkbox-container {
            margin-top: -20px;
            padding: 5px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .checkbox-group {
            display: flex;
            gap: 30px;
            justify-content: center;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 15px 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .checkbox-itemS {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 15px 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .checkbox-item:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .checkbox-itemS:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .checkbox-icon {
            font-size: 24px;
            color: #667eea;
            transition: all 0.3s ease;
        }

        .checkbox-label {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .checkbox-item.checked .checkbox-icon {
            color: #28a745;
        }

        .checkbox-itemS.checked .checkbox-icon {
            color: #fd0000;
        }

        .checkbox-item.checked {
            background: rgba(40, 167, 69, 0.1);
            border-color: rgba(40, 167, 69, 0.3);
        }

        .checkbox-itemS.checked {
            background: rgba(40, 167, 69, 0.1);
            border-color: rgba(167, 40, 40, 0.3);
        }

        /* Input number spinner removal for cleaner look */
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type="number"] {
            
            -moz-appearance: textfield;
        }

        .same-value-btn {
            position: absolute;
            right: 10px;
            top: 18%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9), rgba(118, 75, 162, 0.9));
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.4s ease;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 5px;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .same-value-btn:hover {
            background: linear-gradient(135deg, rgba(102, 126, 234, 1), rgba(118, 75, 162, 1));
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .same-value-btn:active {
            transform: scale(0.95);    
        }

        .same-value-btn .material-icons {
            color: white;
            font-size: 16px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .same-value-text {
            color: white;
            font-size: 12px;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            white-space: nowrap;
        }

        #source-candle-low, #source-candle-high {
            padding-right: 120px;
        }

    </style>
</head>


<script>
  document.addEventListener('DOMContentLoaded', () => {
    const inputOrder = [
      'high',
      'low',
      'market-opening',
      'range-high',
      'range-low'
    ];

    inputOrder.forEach((id, index) => {
      const input = document.getElementById(id);
      if (!input) return;

      input.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
          event.preventDefault();
          const nextId = inputOrder[index + 1];
          const nextInput = nextId ? document.getElementById(nextId) : null;

          if (nextInput) {
            nextInput.focus();
          } else {
            input.blur(); // End focus if it's the last input
          }
        }
      });
    });
  });
</script>





<body>
    <div class="main-header">
        <h1>Snipper Strategy</h1>
    </div>

    <div class="calculators-wrapper">
        <div class="calculator-container">
            <h2>Previous Day Range</h2>
            
            <div class="input-group">
                <label for="high">High Value</label>
                <input type="number" id="high" placeholder="Enter HIGH value" step="any">
            </div>
            
            <div class="input-group">
                <label for="low">Low Value</label>
                <input type="number" id="low" placeholder="Enter LOW value" step="any">
            </div>
            
            <div class="result-container" id="trading-result" style="display: none;">
                <button class="copy-btn" onclick="copyValue('result')">
                    <span class="material-icons">content_copy</span>
                </button>
                <div class="copy-feedback" id="copy-feedback-trading">Copied</div>
                <div class="result-label">Result</div>
                <div class="result-value" id="result">
                    <span class="result-placeholder">Enter values to calculate</span>
                </div>
            </div>
        </div>

        <div class="calculator-container">
            <h2>Range Value's</h2>
            
            <div class="input-group">
                <label for="market-opening">Market Opening</label>
                <input type="number" id="market-opening" placeholder="Enter Market Opening value" step="any">
            </div>
            
            <div class="market-result-container" id="market-result-1" style="display: none;">
                <button class="copy-btn2" onclick="copyValue('second-value')">
                    <span class="material-icons">content_copy</span>
                </button>
                <div class="copy-feedback" id="copy-feedback-1">Copied</div>
                <div class="market-result-label">1st Value</div>
                <div class="market-result-value" id="second-value">
                    <span class="result-placeholder">Enter market opening value</span>
                </div>
            </div>
            
            <div class="market-result-container" id="market-result-2" style="display: none;">
                <button class="copy-btn2" onclick="copyValue('market-result')">
                    <span class="material-icons">content_copy</span>
                </button>
                <div class="copy-feedback" id="copy-feedback-2">Copied</div>
                <div class="market-result-label">2nd Value</div>
                <div class="market-result-value" id="market-result">
                    <span class="result-placeholder">Enter market opening value</span>
                </div>
            </div>
        </div>

        <div class="calculator-container">
            <h2>Swing Range</h2>
            
            <div class="input-group">
                <label for="range-high">High</label>
                <input type="number" id="range-high" placeholder="Enter HIGH value" step="any">
            </div>
            
            <div class="input-group">
                <label for="range-low">Low</label>
                <input type="number" id="range-low" placeholder="Enter LOW value" step="any">
            </div>
            
            <div class="result-container" id="calculation-result" style="display: none;">
                <div class="result-label">Calculation Result</div>
                <div class="result-value" id="calc-result"></div>
            </div>

        </div>

        <div class="calculator-container" id="buy-sell-white-container" style="display: none;">
            
            <div class="checkbox-container" id="checkbox-container" style="display: none;">
                <div class="checkbox-group">
                    <div class="checkbox-item" onclick="toggleCheckbox('buy')">
                        <span class="material-icons checkbox-icon" id="buy-checkbox">check_box_outline_blank</span>
                        <span class="checkbox-label">BUY</span>
                    </div>
                    <div class="checkbox-itemS" onclick="toggleCheckbox('sell')">
                        <span class="material-icons checkbox-icon" id="sell-checkbox">check_box_outline_blank</span>
                        <span class="checkbox-label">SELL</span>
                    </div>
                </div>
            </div>
            
            <div class="input-group" id="source-candle-low-input" style="display: none;">
                <label for="source-candle-low">Source Candle Low</label>
                <div style="position: relative;">
                    <input type="number" id="source-candle-low" placeholder="Source Candle Low" step="any">
                    <button class="same-value-btn" onclick="copySameValueLow()" title="Copy LOW value from Range Calculator">
                        <span class="material-icons">content_copy</span>
                        <span class="same-value-text">Same Value</span>
                    </button>
                </div>
            </div>
            
            <div class="input-group" id="source-candle-high-input" style="display: none;">
                <label for="source-candle-high">Source Candle High</label>
                <div style="position: relative;">
                    <input type="number" id="source-candle-high" placeholder="Source Candle High" step="any">
                    <button class="same-value-btn" onclick="copySameValueHigh()" title="Copy HIGH value from Range Calculator">
                        <span class="material-icons">content_copy</span>
                        <span class="same-value-text">Same Value</span>
                    </button>
                </div>
            </div>
           

            <div class="buy-sell-container" id="buy-sell-container">
                <div class="result-container buy-container">
                    <div class="result-label">BUY</div>
                    <div class="values-container">
                        <div class="value-item">
                            <button class="copy-btn" onclick="copyValue('buy-value1')">
                                <span class="material-icons">content_copy</span>
                            </button>
                            <div class="copy-feedback" id="copy-feedback-buy1">Copied</div>
                            <div class="value-label">Value 1</div>
                            <div class="result-value" id="buy-value1"></div>
                        </div>
                        <div class="value-item">
                            <button class="copy-btn" onclick="copyValue('buy-value2')">
                                <span class="material-icons">content_copy</span>
                            </button>
                            <div class="copy-feedback" id="copy-feedback-buy2">Copied</div>
                            <div class="value-label">Value 2</div>
                            <div class="result-value" id="buy-value2"></div>
                        </div>
                    </div>
                </div>
                
                <div class="result-container sell-container">
                    <div class="result-label">SELL</div>
                    <div class="values-container">
                        <div class="value-item">
                            <button class="copy-btn" onclick="copyValue('sell-value1')">
                                <span class="material-icons">content_copy</span>
                            </button>
                            <div class="copy-feedback" id="copy-feedback-sell1">Copied</div>
                            <div class="value-label">Value 1</div>
                            <div class="result-value" id="sell-value1"></div>
                        </div>
                        <div class="value-item">
                            <button class="copy-btn" onclick="copyValue('sell-value2')">
                                <span class="material-icons">content_copy</span>
                            </button>
                            <div class="copy-feedback" id="copy-feedback-sell2">Copied</div>
                            <div class="value-label">Value 2</div>
                            <div class="result-value" id="sell-value2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    

    <script>
        const highInput = document.getElementById('high');
        const lowInput = document.getElementById('low');
        const resultDisplay = document.getElementById('result');
        const marketOpeningInput = document.getElementById('market-opening');
        const marketResultDisplay = document.getElementById('market-result');
        const secondValueDisplay = document.getElementById('second-value');
        
        let tradingResult = 0; // Store the trading calculator result


        function copySameValueLow() {
            const rangeLow = document.getElementById('range-low').value;
            document.getElementById('source-candle-low').value = rangeLow;
            showBuyResults(); // Update output
        }

        function copySameValueHigh() {
            const rangeHigh = document.getElementById('range-high').value;
            document.getElementById('source-candle-high').value = rangeHigh;
            showSellResults(); // Update output
        }

        function copyValue(elementId) {
            const element = document.getElementById(elementId);
            let value = element.textContent.trim();
            
            // Remove any placeholder text
            if (value.includes('Enter') || value.includes('calculate')) {
                return;
            }
            
            // Use modern clipboard API if available, fallback to execCommand
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(value).then(() => {
                    showCopyFeedback(element);
                }).catch(() => {
                    fallbackCopy(value, element);
                });
            } else {
                fallbackCopy(value, element);
            }
        }

        function fallbackCopy(value, element) {
            const textarea = document.createElement('textarea');
            textarea.value = value;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            showCopyFeedback(element);
        }

        function showCopyFeedback(element) {
            const feedbackElement = element.closest('.result-container, .value-item').querySelector('.copy-feedback');
            if (feedbackElement) {
                feedbackElement.classList.add('show');
                setTimeout(() => {
                    feedbackElement.classList.remove('show');
                }, 1500);
            }
        }

        function calculateResult() {
            const high = parseFloat(highInput.value);
            const low = parseFloat(lowInput.value);
            
            // Check if both values are valid numbers
            if (!isNaN(high) && !isNaN(low)) {
                // Calculate C11 (HIGH - LOW)
                const c11 = high - low;
                
                // Calculate X4 = C11 * 100
                const x4 = c11 * 100;
                
                // Apply Excel formula: INT(INT(C11) - (X4/287))
                const intC11 = Math.floor(c11); // INT(C11)
                const x4Divided = x4 / 287; // X4/287
                const subtraction = intC11 - x4Divided; // INT(C11) - (X4/287)
                let result = subtraction; // Keep decimal precision
                
                // Apply range validation and division logic
                let finalResult = result;
                let divisionCount = 0;
                
                // Keep dividing by 2 until we get in range 500-1000 or exhaust attempts
                while (divisionCount < 10) { // Prevent infinite loop
                    if (finalResult >= 500 && finalResult <= 1000) {
                        // Value is in range, display it with 4 decimal places
                        tradingResult = parseFloat(finalResult.toFixed(4));  // Store integer for market calculator
                        resultDisplay.innerHTML = finalResult.toFixed(2);
                        resultDisplay.classList.remove('result-placeholder');
                        document.getElementById('trading-result').style.display = 'block';
                        calculateMarketResult(); // Update market result when trading result changes
                        return;
                    }
                    
                    // Not in range, divide by 2 and try again
                    finalResult = finalResult / 2;
                    divisionCount++;
                }
                
                // If still not in range after divisions, find the closest value to 500-1000 range
                let closestValue;
                if (finalResult < 500) {
                    closestValue = 500;
                } else {
                    closestValue = 1000;
                }
                
                tradingResult = closestValue; // Store for market calculator
                resultDisplay.innerHTML = closestValue.toFixed(4);
                resultDisplay.classList.remove('result-placeholder');
                document.getElementById('trading-result').style.display = 'block';
                calculateMarketResult(); // Update market result when trading result changes
                
            } else {
                tradingResult = 0;
                resultDisplay.innerHTML = '<span class="result-placeholder">Enter values to calculate</span>';
                document.getElementById('trading-result').style.display = 'none';
                calculateMarketResult(); // Update market result when trading result is cleared
            }
        }

        function calculateMarketResult() {
            const marketOpening = parseFloat(marketOpeningInput.value);
            
            // Check if market opening is valid and we have a trading result
            if (!isNaN(marketOpening) && tradingResult > 0) {
                const finalMarketResult = marketOpening + tradingResult;
                marketResultDisplay.innerHTML = finalMarketResult.toFixed(2);
                marketResultDisplay.classList.remove('result-placeholder');
                document.getElementById('market-result-1').style.display = 'block';
                
                // 2nd Value shows the same as market opening input
                secondValueDisplay.innerHTML = marketOpening.toString();
                secondValueDisplay.classList.remove('result-placeholder');
                document.getElementById('market-result-2').style.display = 'block';
            } else {
                marketResultDisplay.innerHTML = '<span class="result-placeholder">Enter market opening value</span>';
                secondValueDisplay.innerHTML = '<span class="result-placeholder">Enter market opening value</span>';
                document.getElementById('market-result-1').style.display = 'none';
                document.getElementById('market-result-2').style.display = 'none';
            }
        }

        // Add event listeners for real-time calculation
        highInput.addEventListener('input', calculateResult);
        lowInput.addEventListener('input', calculateResult);
        highInput.addEventListener('blur', calculateResult);
        lowInput.addEventListener('blur', calculateResult);
        
        // Add event listeners for market calculator
        marketOpeningInput.addEventListener('input', calculateMarketResult);
        marketOpeningInput.addEventListener('blur', calculateMarketResult);

        // Range Calculator functionality
        const rangeHighInput = document.getElementById('range-high');
        const rangeLowInput = document.getElementById('range-low');
        const buySellContainer = document.getElementById('buy-sell-container');
        const calculationResult = document.getElementById('calculation-result');
        const calcResult = document.getElementById('calc-result');
        const buyValue1 = document.getElementById('buy-value1');
        const buyValue2 = document.getElementById('buy-value2');
        const sellValue1 = document.getElementById('sell-value1');
        const sellValue2 = document.getElementById('sell-value2');

        let rangeCalculationResult = 0; // Store the range calculation result

        function calculateRangeResult() {
            const rangeHigh = parseFloat(rangeHighInput.value);
            const rangeLow = parseFloat(rangeLowInput.value);
            
            // Check if both values are valid numbers
            if (!isNaN(rangeHigh) && !isNaN(rangeLow)) {
                // Calculate (high - low) * 8.09 * 0.602 with decimal
                rangeCalculationResult = (rangeHigh - rangeLow) * 8.09 * 0.602;
                
                // ✅ Store internal precision (4 digits)
                rangeCalculationResult = parseFloat(rangeCalculationResult.toFixed(4));

                //  Display rounded result (2 digits)
                calcResult.innerHTML = rangeCalculationResult.toFixed(2);
                calculationResult.style.display = 'block';
                
                // Show the fourth container with checkboxes
                document.getElementById('buy-sell-white-container').style.display = 'block';
                document.getElementById('checkbox-container').style.display = 'block';
                
                // Reset checkboxes and hide buy/sell containers
                resetCheckboxes();
                buySellContainer.style.display = 'none';
            } else {
                // Hide all containers if inputs are invalid
                calculationResult.style.display = 'none';
                document.getElementById('buy-sell-white-container').style.display = 'none';
                document.getElementById('checkbox-container').style.display = 'none';
                buySellContainer.style.display = 'none';
                rangeCalculationResult = 0;
            }
        }

        function resetCheckboxes() {
            document.getElementById('buy-checkbox').textContent = 'check_box_outline_blank';
            document.getElementById('sell-checkbox').textContent = 'check_box_outline_blank';
            document.querySelector('.checkbox-item[onclick="toggleCheckbox(\'buy\')"]').classList.remove('checked');
            document.querySelector('.checkbox-itemS[onclick="toggleCheckbox(\'sell\')"]').classList.remove('checked');
            
        }

        function toggleCheckbox(type) {
            const buyCheckbox = document.getElementById('buy-checkbox');
            const sellCheckbox = document.getElementById('sell-checkbox');
            const buyItem = document.querySelector('.checkbox-item[onclick="toggleCheckbox(\'buy\')"]');
            const sellItem = document.querySelector('.checkbox-itemS[onclick="toggleCheckbox(\'sell\')"]');
            const sourceCandleLowInput = document.getElementById('source-candle-low-input');
            const sourceCandleHighInput = document.getElementById('source-candle-high-input');

            // Reset checkboxes
            buyCheckbox.textContent = 'check_box_outline_blank';
            sellCheckbox.textContent = 'check_box_outline_blank';
            buyItem.classList.remove('checked');
            sellItem.classList.remove('checked');

            // Hide both first
            buySellContainer.style.display = 'none';
            sourceCandleLowInput.style.display = 'none';
            sourceCandleHighInput.style.display = 'none';

            if (type === 'buy') {
                buyCheckbox.textContent = 'check_box';
                buyItem.classList.add('checked');
                sourceCandleLowInput.style.display = 'block';

                // ✅ Focus the LOW input field
                document.getElementById('source-candle-low').focus();
            }

            if (type === 'sell') {
                sellCheckbox.textContent = 'check_box';
                sellItem.classList.add('checked');
                sourceCandleHighInput.style.display = 'block';

                // ✅ Focus the HIGH input field
                document.getElementById('source-candle-high').focus();
            }
        }

        function showBuyResults() {
            const sourceCandleLow = parseFloat(document.getElementById('source-candle-low').value);

            if (!isNaN(sourceCandleLow)) {
                buyValue1.innerHTML = sourceCandleLow.toFixed(2);
                buyValue2.innerHTML = (sourceCandleLow + rangeCalculationResult).toFixed(2);

                document.querySelector('.sell-container').style.display = 'none';
                document.querySelector('.buy-container').style.display = 'flex';
                buySellContainer.style.display = 'flex';
                document.getElementById('buy-sell-white-container').style.display = 'block';
            } else {
                buySellContainer.style.display = 'none';
            }
        }

        function showSellResults() {
            const sourceCandleHigh = parseFloat(document.getElementById('source-candle-high').value);

            if (!isNaN(sourceCandleHigh)) {
                sellValue1.innerHTML = sourceCandleHigh.toFixed(2);
                sellValue2.innerHTML = (sourceCandleHigh - rangeCalculationResult).toFixed(2);

                document.querySelector('.buy-container').style.display = 'none';
                document.querySelector('.sell-container').style.display = 'flex';
                buySellContainer.style.display = 'flex';
                document.getElementById('buy-sell-white-container').style.display = 'block';
            } else {
                buySellContainer.style.display = 'none';
            }
        }


        // Add event listeners for range calculator
        rangeHighInput.addEventListener('input', calculateRangeResult);
        rangeLowInput.addEventListener('input', calculateRangeResult);
        rangeHighInput.addEventListener('blur', calculateRangeResult);
        rangeLowInput.addEventListener('blur', calculateRangeResult);
        document.getElementById('source-candle-low').addEventListener('input', showBuyResults);
        document.getElementById('source-candle-high').addEventListener('input', showSellResults);

        
        
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9676ce86a4567ef2',t:'MTc1Mzg5ODk2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
